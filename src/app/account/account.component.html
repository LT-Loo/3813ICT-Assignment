<!-- Account Page -->

<div class = "screen">
    <div class = "container min-vh-100">

        <div class = "row align-items-center" id = "user">
            <div class = "col" id = "username"><h1>{{ user.username }}</h1></div>
            <div class = "col-5 col-lg-3 text-end">
                <div class = "btn-group">
                    <button type = "button" class = "btn btn-secondary rounded me-2 py-1" (click) = "openModal('settings')">Settings</button>
                    <button type = "button" class = "btn btn-outline-primary rounded py-1" (click) = "logout()">LOGOUT</button>       
                </div>   
            </div>
        </div>

        <hr class = "mt-1">

        <!-- User Details -->
        <div class = "row py-1 mx-auto" id = "user-data">
            <div class = "col-3 position-relative" id = "user-pfp">
                <img src = "http://localhost:3000\images\{{user.pfp}}" class = "img-thumbnail position-absolute top-50 start-50 translate-middle">
            </div>
            <div class = "col position-relative" id = "user-details">
                <table class = "table-responsive-lg ms-4 position-absolute top-50 start-0 translate-middle-y">
                    <tr><th>ID</th><td colspan = "2">{{ user._id }}</td></tr>
                    <tr><th>Email</th><td colspan = "2">{{ user.email }}</td></tr>
                    <!-- User Overall Role -->
                    <tr *ngIf = "user.superOrAdmin != 'none'">
                        <th>Role</th>
                        <td class = "text-capitalize">{{ user.superOrAdmin }}</td>
                        <td class = "text-end"><button type = "button" class = "btn btn-sm py-0 px-1" (click) = "openModal('admin')"><i class = "bi bi-gear-fill"></i></button></td>
                    </tr>
                    <tr><th>Last active</th><td colspan = "2">{{ user.lastActive }}</td></tr>
                </table>
            </div>   
        </div>

        <hr>

        <!-- Group List -->
        <div class = "row mx-auto" id = "groups">
            <div class = "row m-0 px-0 pb-1">
                <div class = "col p-0"><h2>Group ({{ groups.length }})</h2></div>
                <div *ngIf = "user.superOrAdmin != 'none'" class = "col text-end p-0">
                    <button type = "button" class = "btn btn-primary py-1" (click) = "openModal('newGroup')">Create Group</button>
                </div>
            </div>
            <div class = "container bg-transparent text-center p-0 m-auto w-100 mt-2">
                <div class = "row row-cols-3 row-cols-lg-6 p-0 m-0">
                    <div *ngFor = "let group of groups" class = "col mb-3 px-1" (click) = "openModal('details', group.id)">
                        <div class = "group text-center border border-dark rounded py-1">
                            <h5 class = "mb-0">{{ group.value[0].groupname }}</h5>    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

